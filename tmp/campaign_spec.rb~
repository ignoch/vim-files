require 'spec_helper'

describe Campaign do
  before(:each) do
    @attr = { :name => "Spideman campaign", :date_start => '01/01/2011', :date_end => '31/12/2011' }
  end

  it "should create a new Campaign with a valid attributes" do
    Campaign.create!(@attr)
  end

  describe "Validating attributes" do

    it "should require a name" do
      no_name_campaign = Campaign.new(@attr.merge(:name => ""))
      no_name_campaign.should_not be_valid
    end
  
    it "should require a start date" do 
      no_date_start_campaing = Campaign.new(@attr.merge(:date_start => ""))
      no_date_start_campaing.should_not be_valid
    end
  
    it "should require a end date" do 
      no_date_end_campaign = Campaign.new(@attr.merge(:date_end => ""))
      no_date_end_campaign.should_not be_valid
    end
  
    it "should end date don't be greater than the start date" do
      dates_campaign = Campaign.new(@attr.merge(:date_end => '01/01/2010'))
      dates_campaign.should have(1).error_on(:date_start)
    end
  
    it "should date end can't be in the past" do
      past_campaign = Campaign.new(@attr.merge(:date_end => '01/01/2010'))
      past_campaign.should have(1).error_on(:date_end)
    end
  end

end
