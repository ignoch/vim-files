class UsersController < InheritedResources::Base
  authorize_resource
  layout "dashboard"
  add_breadcrumb 'Usuarios', 'users_path'

  def index
    add_breadcrumb 'Listado de Usuarios', 'users_path'
    @users = User.all
  end

  def new
    add_breadcrumb 'Nuevo Usuario', 'new_user_path'
    @user = User.new
  end

  def edit
    add_breadcrumb 'Edicion de Usuario', ''
    @user = User.find(params[:id])
  end

  def search
    add_breadcrumb 'Busqueda', ''
    @users = User.search(params[:search])
    if @users.empty?
      flash[:notice] = "No hay resultados con ese criterio de busqueda."
    end
    render :index
  end

  def update
    update!(:notice => "Usuario modificado con exito"){ users_path }
  end

  def create
    create!(:notice => "Usuario creado con exito"){ users_path }
  end
end
